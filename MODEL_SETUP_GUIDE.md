# æ¬¾å¼è¯†åˆ«æ¨¡å‹è®¾ç½®æŒ‡å—

## é—®é¢˜æè¿°

ç³»ç»Ÿæç¤ºï¼š`æœªæ‰¾åˆ°æ¬¾å¼è¯†åˆ«æ¨¡å‹æ–‡ä»¶: models/best_model.h5`

è¿™æ˜¯æ­£å¸¸çš„ - ç³»ç»Ÿä¼šè‡ªåŠ¨é™çº§ä¸ºä»…ä½¿ç”¨é¢œè‰²å’Œè§„åˆ™åˆ†æã€‚ä½†å¦‚æœä½ æƒ³å¯ç”¨æ¬¾å¼è¯†åˆ«åŠŸèƒ½ï¼Œå¯ä»¥æŒ‰ç…§æœ¬æŒ‡å—è¿›è¡Œè®¾ç½®ã€‚

---

## è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1: ä½¿ç”¨ç°æœ‰ç³»ç»Ÿï¼ˆæ¨èï¼‰

**ä¼˜ç‚¹**: æ— éœ€é¢å¤–é…ç½®ï¼Œç³»ç»Ÿå·²å®Œå…¨å¯ç”¨

**åŠŸèƒ½**:
- âœ… é¢œè‰²åˆ†æ
- âœ… è§„åˆ™è¯„ä¼°
- âœ… åœºæ™¯æ¨è
- âš ï¸ æ¬¾å¼è¯†åˆ«ï¼ˆéœ€è¦ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©ï¼‰

**ä½¿ç”¨æ–¹æ³•**:
```
1. é€‰æ‹©åœºæ™¯ â†’ è‡ªåŠ¨å¡«å……æ¬¾å¼å»ºè®®
2. ä¿®æ”¹æ¬¾å¼ï¼ˆå¯é€‰ï¼‰
3. ä¸Šä¼ å›¾ç‰‡
4. ç‚¹å‡»åˆ†æ
```

---

### æ–¹æ¡ˆ2: åˆ›å»ºè™šæ‹Ÿæ¨¡å‹ï¼ˆå¿«é€Ÿï¼‰

å¦‚æœä½ æƒ³è®©ç³»ç»Ÿè®¤ä¸ºæœ‰æ¨¡å‹ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿæ¨¡å‹æ–‡ä»¶ã€‚

#### æ­¥éª¤1: åˆ›å»ºæ¨¡å‹ç›®å½•

```bash
mkdir -p models
```

#### æ­¥éª¤2: åˆ›å»ºè™šæ‹Ÿæ¨¡å‹

è¿è¡Œä»¥ä¸‹Pythonä»£ç ï¼š

```python
import os
import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers

# åˆ›å»ºä¸€ä¸ªç®€å•çš„æ¨¡å‹
model = keras.Sequential([
    layers.Input(shape=(224, 224, 3)),
    layers.Conv2D(32, 3, activation='relu'),
    layers.GlobalAveragePooling2D(),
    layers.Dense(8, activation='softmax')
])

# ç¼–è¯‘æ¨¡å‹
model.compile(optimizer='adam', loss='categorical_crossentropy', metrics=['accuracy'])

# ä¿å­˜æ¨¡å‹
os.makedirs('models', exist_ok=True)
model.save('models/best_model.h5')
print("è™šæ‹Ÿæ¨¡å‹å·²åˆ›å»º: models/best_model.h5")
```

æˆ–è€…è¿è¡Œå‘½ä»¤ï¼š

```bash
python -c "
import os
import tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers

model = keras.Sequential([
    layers.Input(shape=(224, 224, 3)),
    layers.Conv2D(32, 3, activation='relu'),
    layers.GlobalAveragePooling2D(),
    layers.Dense(8, activation='softmax')
])

model.compile(optimizer='adam', loss='categorical_crossentropy', metrics=['accuracy'])
os.makedirs('models', exist_ok=True)
model.save('models/best_model.h5')
print('è™šæ‹Ÿæ¨¡å‹å·²åˆ›å»º')
"
```

**æ³¨æ„**: è¿™ä¸ªè™šæ‹Ÿæ¨¡å‹ä¸ä¼šè¿›è¡ŒçœŸå®çš„æ¬¾å¼è¯†åˆ«ï¼Œåªæ˜¯ä¸ºäº†æ¶ˆé™¤è­¦å‘Šã€‚

---

### æ–¹æ¡ˆ3: è®­ç»ƒçœŸå®æ¨¡å‹ï¼ˆå®Œæ•´ï¼‰

å¦‚æœä½ æœ‰æœè£…å›¾ç‰‡æ•°æ®é›†ï¼Œå¯ä»¥è®­ç»ƒçœŸå®çš„æ¬¾å¼è¯†åˆ«æ¨¡å‹ã€‚

#### æ­¥éª¤1: å‡†å¤‡æ•°æ®é›†

åˆ›å»ºä»¥ä¸‹ç›®å½•ç»“æ„ï¼š

```
data/
â”œâ”€â”€ train/
â”‚   â”œâ”€â”€ Tæ¤/
â”‚   â”‚   â”œâ”€â”€ image1.jpg
â”‚   â”‚   â”œâ”€â”€ image2.jpg
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ è¡¬è¡«/
â”‚   â”œâ”€â”€ å«è¡£/
â”‚   â”œâ”€â”€ å¤–å¥—/
â”‚   â”œâ”€â”€ ç‰›ä»”è£¤/
â”‚   â”œâ”€â”€ ä¼‘é—²è£¤/
â”‚   â”œâ”€â”€ è¿åŠ¨é‹/
â”‚   â””â”€â”€ çš®é‹/
â””â”€â”€ validation/
    â”œâ”€â”€ Tæ¤/
    â”œâ”€â”€ è¡¬è¡«/
    â””â”€â”€ ...
```

**æ•°æ®è¦æ±‚**:
- æ¯ä¸ªç±»åˆ«è‡³å°‘50å¼ å›¾ç‰‡
- å›¾ç‰‡æ ¼å¼: JPG, PNG
- å›¾ç‰‡å¤§å°: ä»»æ„ï¼ˆä¼šè‡ªåŠ¨è°ƒæ•´åˆ°224x224ï¼‰

#### æ­¥éª¤2: è¿è¡Œè®­ç»ƒè„šæœ¬

```bash
python src/core/train.py \
    --train_dir data/train \
    --validation_dir data/validation \
    --model_dir models \
    --batch_size 32 \
    --epochs 50 \
    --learning_rate 0.0001 \
    --fine_tune
```

**å‚æ•°è¯´æ˜**:
- `--train_dir`: è®­ç»ƒæ•°æ®ç›®å½•
- `--validation_dir`: éªŒè¯æ•°æ®ç›®å½•
- `--model_dir`: æ¨¡å‹ä¿å­˜ç›®å½•
- `--batch_size`: æ‰¹æ¬¡å¤§å°
- `--epochs`: è®­ç»ƒè½®æ•°
- `--learning_rate`: å­¦ä¹ ç‡
- `--fine_tune`: æ˜¯å¦è¿›è¡Œå¾®è°ƒ

#### æ­¥éª¤3: ç­‰å¾…è®­ç»ƒå®Œæˆ

è®­ç»ƒè¿‡ç¨‹ä¼šï¼š
1. åŠ è½½é¢„è®­ç»ƒçš„MobileNetV2æ¨¡å‹
2. è¿›è¡Œè¿ç§»å­¦ä¹ ï¼ˆå†»ç»“åŸºç¡€å±‚ï¼‰
3. å¯é€‰ï¼šè¿›è¡Œå¾®è°ƒï¼ˆè§£å†»éƒ¨åˆ†å±‚ï¼‰
4. ä¿å­˜æœ€ä½³æ¨¡å‹åˆ° `models/best_model.h5`

**é¢„æœŸæ—¶é—´**: 
- æ— GPU: 1-2å°æ—¶
- æœ‰GPU: 10-30åˆ†é’Ÿ

---

## æ•°æ®é›†æ¥æº

### å…¬å¼€æ•°æ®é›†

1. **Fashion MNIST**
   - 70,000å¼ ç°åº¦å›¾ç‰‡
   - 10ä¸ªç±»åˆ«
   - ä¸‹è½½: https://github.com/zalandoresearch/fashion-mnist

2. **DeepFashion**
   - 800,000+å¼ å›¾ç‰‡
   - å¤šä¸ªç±»åˆ«
   - ä¸‹è½½: http://www.deepfashion.org/

3. **Clothing1M**
   - 1,000,000+å¼ å›¾ç‰‡
   - 14ä¸ªç±»åˆ«
   - ä¸‹è½½: https://github.com/Cysu/noisy_label_understanding

### è‡ªå·±æ”¶é›†æ•°æ®

```bash
# ä½¿ç”¨Bingå›¾ç‰‡æœç´¢ä¸‹è½½
# æˆ–ä½¿ç”¨çˆ¬è™«å·¥å…·ä»ç½‘ç«™ä¸‹è½½
# æˆ–ä½¿ç”¨æ‰‹æœºæ‹ç…§æ”¶é›†

# ç»„ç»‡æˆä¸Šè¿°ç›®å½•ç»“æ„
# ç¡®ä¿æ¯ä¸ªç±»åˆ«æœ‰è¶³å¤Ÿçš„å›¾ç‰‡
```

---

## æ¨¡å‹æ€§èƒ½

### é¢„æœŸå‡†ç¡®ç‡

- **éªŒè¯å‡†ç¡®ç‡**: 85-95%ï¼ˆå–å†³äºæ•°æ®è´¨é‡ï¼‰
- **æ¨ç†é€Ÿåº¦**: 100-200ms/å¼ å›¾ç‰‡

### æ”¹è¿›æ–¹æ³•

1. **å¢åŠ æ•°æ®é‡** - æ›´å¤šæ•°æ® = æ›´å¥½çš„æ¨¡å‹
2. **æ•°æ®å¢å¼º** - æ—‹è½¬ã€ç¿»è½¬ã€è£å‰ªç­‰
3. **è°ƒæ•´è¶…å‚æ•°** - å­¦ä¹ ç‡ã€æ‰¹æ¬¡å¤§å°ç­‰
4. **ä½¿ç”¨æ›´å¼ºçš„æ¨¡å‹** - ResNet, EfficientNetç­‰

---

## æ•…éšœæ’é™¤

### é—®é¢˜1: æ¨¡å‹åŠ è½½å¤±è´¥

```
é”™è¯¯: Failed to load model
```

**è§£å†³**:
1. æ£€æŸ¥æ¨¡å‹æ–‡ä»¶æ˜¯å¦å­˜åœ¨: `ls -la models/best_model.h5`
2. æ£€æŸ¥æ¨¡å‹æ–‡ä»¶æ˜¯å¦å®Œæ•´: `file models/best_model.h5`
3. é‡æ–°ä¸‹è½½æˆ–è®­ç»ƒæ¨¡å‹

### é—®é¢˜2: è®­ç»ƒé€Ÿåº¦æ…¢

**è§£å†³**:
1. å‡å°‘ `--batch_size` (å¦‚: 16)
2. å‡å°‘ `--epochs` (å¦‚: 20)
3. ä½¿ç”¨GPUåŠ é€Ÿ
4. å‡å°‘æ•°æ®é›†å¤§å°

### é—®é¢˜3: å†…å­˜ä¸è¶³

**è§£å†³**:
1. å‡å°‘ `--batch_size` (å¦‚: 8)
2. å‡å°‘å›¾ç‰‡åˆ†è¾¨ç‡
3. ä½¿ç”¨æ›´å°çš„æ¨¡å‹

### é—®é¢˜4: å‡†ç¡®ç‡ä½

**è§£å†³**:
1. å¢åŠ è®­ç»ƒæ•°æ®
2. å¢åŠ è®­ç»ƒè½®æ•°
3. è°ƒæ•´å­¦ä¹ ç‡
4. æ£€æŸ¥æ•°æ®è´¨é‡

---

## å¿«é€Ÿæµ‹è¯•

### æµ‹è¯•è™šæ‹Ÿæ¨¡å‹

```bash
# åˆ›å»ºè™šæ‹Ÿæ¨¡å‹
python -c "
import os, tensorflow as tf
from tensorflow import keras
from tensorflow.keras import layers

model = keras.Sequential([
    layers.Input(shape=(224, 224, 3)),
    layers.Conv2D(32, 3, activation='relu'),
    layers.GlobalAveragePooling2D(),
    layers.Dense(8, activation='softmax')
])
model.compile(optimizer='adam', loss='categorical_crossentropy')
os.makedirs('models', exist_ok=True)
model.save('models/best_model.h5')
"

# æµ‹è¯•åº”ç”¨
python run.py
```

### æµ‹è¯•çœŸå®æ¨¡å‹

```bash
# ä¸Šä¼ å›¾ç‰‡å¹¶åˆ†æ
# ç³»ç»Ÿä¼šè‡ªåŠ¨ä½¿ç”¨æ¨¡å‹è¿›è¡Œæ¬¾å¼è¯†åˆ«
```

---

## æ€»ç»“

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | æ¨è |
|------|------|------|------|
| æ–¹æ¡ˆ1: ç°æœ‰ç³»ç»Ÿ | æ— éœ€é…ç½®ï¼Œå®Œå…¨å¯ç”¨ | éœ€è¦æ‰‹åŠ¨é€‰æ‹©æ¬¾å¼ | âœ… æ¨è |
| æ–¹æ¡ˆ2: è™šæ‹Ÿæ¨¡å‹ | å¿«é€Ÿï¼Œæ¶ˆé™¤è­¦å‘Š | ä¸è¿›è¡ŒçœŸå®è¯†åˆ« | âš ï¸ å¯é€‰ |
| æ–¹æ¡ˆ3: çœŸå®æ¨¡å‹ | å®Œæ•´åŠŸèƒ½ï¼Œè‡ªåŠ¨è¯†åˆ« | éœ€è¦æ•°æ®å’Œæ—¶é—´ | ğŸ”„ è¿›é˜¶ |

---

## ä¸‹ä¸€æ­¥

1. **ç«‹å³ä½¿ç”¨** - ç³»ç»Ÿå·²å®Œå…¨å¯ç”¨ï¼Œæ— éœ€é¢å¤–é…ç½®
2. **å¯é€‰** - åˆ›å»ºè™šæ‹Ÿæ¨¡å‹æ¶ˆé™¤è­¦å‘Š
3. **è¿›é˜¶** - æ”¶é›†æ•°æ®å¹¶è®­ç»ƒçœŸå®æ¨¡å‹

---

**æœ€åæ›´æ–°**: 2025å¹´12æœˆ4æ—¥  
**ç‰ˆæœ¬**: 1.0.0
